<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="UTF-8"><meta http-equiv="Content-Security-Policy"
content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com;connect-src 'self';script-src 'self' 'self'">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="base" content="https://synex.space/">

    
    <title>
~/Syn3x • Docker-容器管理</title>

    
    
    

    
    

    
    
    
        
            <link rel="stylesheet" href="https://synex.space/custom_subset.css?h=0b9535a28bc3d5bf2321">
        
    

    
        <link rel="stylesheet" href="https://synex.space/main.css?h=045c365e19a4d50a64bb" />
        <link rel="stylesheet" href="https://synex.space/skins/mint.css?h=504215cf6bc10586b487" />

    <meta name="color-scheme" content="light dark" />
        <meta name="description" content="" />
        <meta property="og:description" content="" />

    

    <meta property="og:title" content="Docker-容器管理" />
    <meta property="og:type" content="article" />

    
<meta property="og:locale" content="en_GB" />

    <meta property="og:url" content="https:&#x2F;&#x2F;synex.space&#x2F;blog&#x2F;docker-rong-qi-guan-li&#x2F;" /><meta property="og:site_name" content="~&#x2F;Syn3x">
        <noscript><link rel="stylesheet" href="https://synex.space/no_js.css"/></noscript>
        <script type="text/javascript" src="https://synex.space/js/initializeTheme.min.js"></script>
        <script defer src="https://synex.space/js/themeSwitcher.min.js"></script>
        <script defer src="https://synex.space/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e"></script>

        
    
</head>


<body>
    <a href="#main-content" id="skip-link">Skip to content</a>
    <header>
    <nav class="navbar">
        <div class="nav-title">
            <a class="home-title" href="https://synex.space/">~&#x2F;Syn3x</a>
        </div>
            <div class="nav-navs">
                <ul>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://synex.space/blog/">blog
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://synex.space/archive/">archive
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://synex.space/tags/">tags
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://synex.space/friends/">friends
                                </a>
                            </li>
                        <li class="menu-icons-container">
                        <ul class="menu-icons-group">
                            <li class="js menu-icon">
                                <div role="button" tabindex="0" id="search-button" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" aria-label="Click or press $SHORTCUT to open search">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                                        <path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
                                    </svg>
                                </div>
                            </li>

                            
                            

                            <li class="theme-switcher-wrapper js"><div
        title="Toggle dark&#x2F;light mode"
        class="theme-switcher"
        tabindex="0"
        role="button"
        aria-label="Toggle dark mode"
        aria-pressed="false">
    </div><div
        title="Reset mode to default"
        class="theme-resetter arrow"
        tabindex="0"
        role="button"
        aria-hidden="true"
        aria-label="Reset mode to default">
    </div>

</li>
</ul>
                    </li>
                </ul>
            </div>
        
    </nav>
</header>

    <div class="content" id="main-content">

        
        





<main>
    <article class="h-entry">
        <h1 class="p-name article-title">
            Docker-容器管理
        </h1>
        <a class="u-url u-uid" href="https://synex.space/blog/docker-rong-qi-guan-li/"></a>

        <ul class="meta"><span class="hidden p-author h-card">
<a rel="author" href="https:&#x2F;&#x2F;synex.space&#x2F;" class="u-url " title=""></a>
</span>
<li><time class="dt-published" datetime="2022-04-06T14:32:00">6th Apr 2022</time></li><li title="2910 words"><span class='separator' aria-hidden='true'>•</span>15 min read</li><li class="tag"><span class='separator' aria-hidden='true'>•</span>Tags:&nbsp;</li><li class="tag"><a class="p-category" href="https://synex.space/tags/kai-yuan-gong-ju/">开源工具</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://synex.space/tags/docker/">Docker</a></li>
        </ul><section class="e-content body"><h1 id="docker-gai-shu">Docker 概述</h1>
<p>Docker 是一个开源项目，诞生于 2013 年初，最初是 dotCloud 公司内部的一个业余项目。它基于 Google 公司推出的 Go 语言实现。项目后来加入了 Linux 基金会，遵从了 Apache 2.0 协议，项目代码在 GitHub 上进行维护。Docker 项目的目标是实现轻量级的操作系统虚拟化解决方案。Docker 的基础是 Linux 容器（LXC）等技术。</p>
<p>下面的图片比较了容器技术和传统的虚拟化技术的对比，可见容器是在操作系统的基础上实现虚拟化，传统的虚拟化技术还需要一层 Guest OS 系统作为基础实现。</p>
<p><img src="https://image.boychai.xyz/article/Docker_1.jpg" alt="传统虚拟化和容器技术" /></p>
<h1 id="docker-de-an-zhuang">Docker 的安装</h1>
<p><strong>官方文档</strong>: <a href="https://docs.docker.com/get-docker/">https://docs.docker.com/get-docker/</a></p>
<p>Docker 的安装文档清晰明了，可以直接按照其给定的步骤一步一步操作。</p>
<h2 id="xie-zai-jiu-ban-ben-yi-ji-can-liu">卸载旧版本以及残留</h2>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> yum remove docker <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">                docker-client <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">                docker-client-latest <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">                docker-common <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">                docker-latest <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">                docker-latest-logrotate <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">                docker-logrotate <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">                docker-engine</span>
</span></code></pre>
<h2 id="she-zhi-docker-de-yum-ruan-jian-cang-ku">设置 Docker 的 YUM 软件仓库</h2>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> yum install<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>y</span> yum-utils</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> yum-config-manager <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">    --</span>add-repo</span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">    https://download.docker.com/linux/centos/docker-ce.repo</span>
</span></code></pre>
<h2 id="an-zhuang">安装</h2>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin</span>
</span></code></pre>
<h2 id="she-zhi-docker-kai-ji-zi-qi-bing-qi-dong">设置 Docker 开机自启并启动</h2>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> systemctl enable<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>now</span> docker</span>
</span></code></pre>
<h2 id="yun-xing-yi-ge-docker-ce-shi-jing-xiang-lai-yan-zheng-an-zhuang">运行一个 Docker 测试镜像来验证安装</h2>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# sudo docker run hello-world</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Unable</span></span><span class="z-meta z-function-call z-arguments z-shell"> to find image <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>hello-world:latest<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span> locally</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">latest:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pulling from library/hello-world</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2db29710123e:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Digest:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:10d7d58d5ebd2a652f4d93fdd86da8f265f5318c6a73cc5b6a9798ff6d2b2e67</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Status:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Downloaded newer image for hello-world:latest</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Hello</span></span><span class="z-meta z-function-call z-arguments z-shell"> from Docker!</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">This</span></span><span class="z-meta z-function-call z-arguments z-shell"> message shows that your installation appears to be working correctly.</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">To</span></span><span class="z-meta z-function-call z-arguments z-shell"> generate this message, Docker took the following steps:</span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">1.</span></span><span class="z-meta z-function-call z-arguments z-shell"> The Docker client contacted the Docker daemon.</span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2.</span></span><span class="z-meta z-function-call z-arguments z-shell"> The Docker daemon pulled the <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>hello-world<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> image from the Docker Hub.</span>
</span><span class="z-source z-shell z-bash">    <span class="z-punctuation z-definition z-compound z-begin z-shell">(</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">amd64</span></span><span class="z-punctuation z-definition z-compound z-end z-shell">)</span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">3.</span></span><span class="z-meta z-function-call z-arguments z-shell"> The Docker daemon created a new container from that image which runs the</span>
</span><span class="z-source z-shell z-bash">    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">executable</span></span><span class="z-meta z-function-call z-arguments z-shell"> that produces the output you are currently reading.</span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">4.</span></span><span class="z-meta z-function-call z-arguments z-shell"> The Docker daemon streamed that output to the Docker client, which sent it</span>
</span><span class="z-source z-shell z-bash">    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">to</span></span><span class="z-meta z-function-call z-arguments z-shell"> your terminal.</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">To</span></span><span class="z-meta z-function-call z-arguments z-shell"> try something more ambitious, you can run an Ubuntu container with:</span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> docker run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>it</span> ubuntu bash</span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Share</span></span><span class="z-meta z-function-call z-arguments z-shell"> images, automate workflows, and more with a free Docker ID:</span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">https://hub.docker.com/</span></span>
</span><span class="z-source z-shell z-bash">
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">For</span></span><span class="z-meta z-function-call z-arguments z-shell"> more examples and ideas, visit:</span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">https://docs.docker.com/get-started/</span></span>
</span></code></pre>
<h1 id="docker-de-ming-ling">Docker 的命令</h1>
<h2 id="jing-xiang-de-guan-li">镜像的管理</h2>
<h3 id="sou-suo-jian-suo">搜索/检索</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> search 镜像名称</span>
</span></code></pre>
<p>示例：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker search nginx</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">NAME</span></span><span class="z-meta z-function-call z-arguments z-shell">                                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx</span></span><span class="z-meta z-function-call z-arguments z-shell">                                             Official build of Nginx.                        16597     <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>OK<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bitnami/nginx</span></span><span class="z-meta z-function-call z-arguments z-shell">                                     Bitnami nginx Docker Image                      121                  <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>OK<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ubuntu/nginx</span></span><span class="z-meta z-function-call z-arguments z-shell">                                      Nginx, a high-performance reverse proxy</span> <span class="z-keyword z-operator z-logical z-job z-shell">&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">we…</span></span><span class="z-meta z-function-call z-arguments z-shell">   39</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bitnami/nginx-ingress-controller</span></span><span class="z-meta z-function-call z-arguments z-shell">                  Bitnami Docker Image for NGINX Ingress Contr…   17                   <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>OK<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rancher/nginx-ingress-controller</span></span><span class="z-meta z-function-call z-arguments z-shell">                                                                  10</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ibmcom/nginx-ingress-controller</span></span><span class="z-meta z-function-call z-arguments z-shell">                   Docker Image for IBM Cloud Private-CE (Commu…   4</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bitnami/nginx-ldap-auth-daemon</span></span><span class="z-meta z-function-call z-arguments z-shell">                                                                    3</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bitnami/nginx-exporter</span></span><span class="z-meta z-function-call z-arguments z-shell">                                                                            2</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">circleci/nginx</span></span><span class="z-meta z-function-call z-arguments z-shell">                                    This image is for internal use                  2</span>
</span></code></pre>
<p>默认从 Docker Hub 进行搜索镜像。</p>
<h3 id="xia-zai-la-qu">下载/拉取</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> pull 名称:版本</span>
</span></code></pre>
<p>示例：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker pull nginx:1.21.6</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">1.21.6:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pulling from library/nginx</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">c229119241af:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2215908dc0a2:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">08c3cb2073f1:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">18f38162c0ce:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">10e2168f148a:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">c4ffe9532b5f:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Digest:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:2275af0f20d71b293916f1958f8497f987b8d8fd8113df54635f2a5915002bf1</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Status:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Downloaded newer image for nginx:1.21.6</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker.io/library/nginx:1.21.6</span></span>
</span></code></pre>
<p>如果不加版本，则拉取 <code>latest</code> 版本，即最新版本。</p>
<h3 id="jing-xiang-lie-biao">镜像列表</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> images</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> image ls</span>
</span></code></pre>
<p>示例：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker images</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">REPOSITORY</span></span><span class="z-meta z-function-call z-arguments z-shell">                                                        TAG       IMAGE ID       CREATED        SIZE</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx</span></span><span class="z-meta z-function-call z-arguments z-shell">                                                             1.21.6    12766a6745ee   10 days ago    142MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rancher/mirrored-flannelcni-flannel</span></span><span class="z-meta z-function-call z-arguments z-shell">                               v0.17.0   9247abf08677   5 weeks ago    59.8MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rancher/mirrored-flannelcni-flannel-cni-plugin</span></span><span class="z-meta z-function-call z-arguments z-shell">                    v1.0.1    ac40ce625740   2 months ago   8.1MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">registry.aliyuncs.com/google_containers/kube-apiserver</span></span><span class="z-meta z-function-call z-arguments z-shell">            v1.23.0   e6bf5ddd4098   4 months ago   135MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">registry.aliyuncs.com/google_containers/kube-controller-manager</span></span><span class="z-meta z-function-call z-arguments z-shell">   v1.23.0   37c6aeb3663b   4 months ago   125MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">registry.aliyuncs.com/google_containers/kube-scheduler</span></span><span class="z-meta z-function-call z-arguments z-shell">            v1.23.0   56c5af1d00b5   4 months ago   53.5MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">registry.aliyuncs.com/google_containers/kube-proxy</span></span><span class="z-meta z-function-call z-arguments z-shell">                v1.23.0   e03484a90585   4 months ago   112MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">registry.aliyuncs.com/google_containers/etcd</span></span><span class="z-meta z-function-call z-arguments z-shell">                      3.5.1-0   25f8c7f3da61   5 months ago   293MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">registry.aliyuncs.com/google_containers/coredns</span></span><span class="z-meta z-function-call z-arguments z-shell">                   v1.8.6    a4ca41631cc7   6 months ago   46.8MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">registry.aliyuncs.com/google_containers/pause</span></span><span class="z-meta z-function-call z-arguments z-shell">                     3.6       6270bb605e12   7 months ago   683kB</span>
</span></code></pre>
<p>五列数据分别代表镜像名称、镜像版本、镜像 ID、拉取时间、镜像大小。</p>
<h3 id="jing-xiang-biao-qian">镜像标签</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> tag <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>imagesID<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> 改后名称:改后tag</span>
</span></code></pre>
<p>示例：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker tag nginx:1.21.6 mynginx:1.21.6</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker images</span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">grep</span></span><span class="z-meta z-function-call z-arguments z-shell"> nginx</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mynginx</span></span><span class="z-meta z-function-call z-arguments z-shell">                                                           1.21.6    12766a6745ee   10 days ago    142MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx</span></span><span class="z-meta z-function-call z-arguments z-shell">                                                             1.21.6    12766a6745ee   10 days ago    142MB</span>
</span></code></pre>
<h3 id="jing-xiang-shan-chu">镜像删除</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> rmi 镜像id</span>
</span></code></pre>
<p>示例：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker rmi mynginx:1.21.6</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Untagged:</span></span><span class="z-meta z-function-call z-arguments z-shell"> mynginx:1.21.6</span>
</span></code></pre>
<h3 id="jing-xiang-dao-chu">镜像导出</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> save 镜像id/镜像名 <span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> 名字.tar</span>
</span></code></pre>
<p>示例：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker save nginx:1.21.6 <span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> nginx-v1.21.6.tar</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# ls</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx-v1.21.6.tar</span></span>
</span></code></pre>
<h3 id="jing-xiang-dao-ru">镜像导入</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> load <span class="z-keyword z-operator z-assignment z-redirection z-shell">&lt;</span> 包名</span>
</span></code></pre>
<p>示例：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker rmi nginx:1.21.6</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Untagged:</span></span><span class="z-meta z-function-call z-arguments z-shell"> nginx:1.21.6</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Untagged:</span></span><span class="z-meta z-function-call z-arguments z-shell"> nginx@sha256:2275af0f20d71b293916f1958f8497f987b8d8fd8113df54635f2a5915002bf1</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Deleted:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:12766a6745eea133de9fdcd03ff720fa971fdaf21113d4bc72b417c123b15619</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Deleted:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:3ea962f6f388096ab9798790d363fc6f9c779c924a5eddf5c699d8da080114f7</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Deleted:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:091a2aef7242e42505b69f1ad027d6a442cfce2403e260ac914f0fd6cc2d275f</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Deleted:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:4e72a31f1cd6fd655cc0826c91e886967b6e965e13ac21f31f9f66c27a3b7732</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Deleted:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:e3d1cdf9772a260b3e81a22c1940d63ac45dfe67720f78f00ca73834d9498934</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Deleted:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:af40da71a8618ea9cbcdc333d5e60bd5b6df820f0d07a55f7c9a1c21fd930095</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Deleted:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:608f3a074261105f129d707e4d9ad3d41b5baa94887f092b7c2857f7274a2fce</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker load <span class="z-keyword z-operator z-assignment z-redirection z-shell">&lt;</span> nginx-v1.21.6.tar</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">608f3a074261:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Loading layer <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>==================================================&gt;<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>   83.9MB/83.9MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ea207a4854e7:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Loading layer <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>==================================================&gt;<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>     62MB/62MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">33cf1b723f65:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Loading layer <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>==================================================&gt;<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>  3.072kB/3.072kB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">5c77d760e1f4:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Loading layer <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>==================================================&gt;<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>  4.096kB/4.096kB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">fac199a5a1a5:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Loading layer <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>==================================================&gt;<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>  3.584kB/3.584kB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ea4bc0cd4a93:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Loading layer <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>==================================================&gt;<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span>  7.168kB/7.168kB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Loaded</span></span><span class="z-meta z-function-call z-arguments z-shell"> image: nginx:1.21.6</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker images</span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">grep</span></span><span class="z-meta z-function-call z-arguments z-shell"> nginx</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx</span></span><span class="z-meta z-function-call z-arguments z-shell">                                                             1.21.6    12766a6745ee   10 days ago    142MB</span>
</span></code></pre>
<h2 id="rong-qi-de-guan-li">容器的管理</h2>
<h3 id="chuang-jian-rong-qi">创建容器</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> run <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>options<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> image <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>command<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>arg<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span></span>
</span></code></pre>
<p>Option 说明：</p>
<ul>
<li><code>-d</code>: 后台运行</li>
<li><code>-i</code>: 以交互模式运行容器，通常与 <code>-t</code> 同时使用</li>
<li><code>-t</code>: 为容器重新分配一个伪输出终端，通常与 <code>-i</code> 同时使用</li>
<li><code>--name</code>: 设置容器名字</li>
<li><code>--net</code>: 指定网络连接类型</li>
<li><code>--h</code>: 设置主机名称</li>
<li><code>--dns</code>: 指定容器的 DNS 服务器，默认和宿主一致</li>
<li><code>-e</code>: 设置环境变量（<strong>=”</strong>”）</li>
<li><code>-p</code>: 本地端口:容器端口，把容器的某个端口暴露到主机的某个端口</li>
<li><code>-v</code>: 本地目录:容器目录，把主机的某目录挂载到容器的目录里面实现文件系统的链接</li>
<li><code>--network</code>: 指定网络</li>
<li><code>--rm</code>: 容器关闭后自动删除</li>
</ul>
<p>示例：使用命令 <code>docker run -p 8080:80 -d --name nginx1 nginx</code> 来运行一个 Nginx 容器，并且把容器的 80 端口暴露到本机的 8080：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> 8080:80<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>d</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>name</span> nginx1 nginx</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Unable</span></span><span class="z-meta z-function-call z-arguments z-shell"> to find image <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>nginx:latest<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span> locally</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">latest:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pulling from library/nginx</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">1fe172e4850f:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">35c195f487df:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">213b9b16f495:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">a8172d9e19b9:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">f5eee2cb2150:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">93e404ba8667:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Digest:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:859ab6768a6f26a79bc42b231664111317d095a4f04e4b6fe79ce37b3d199097</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Status:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Downloaded newer image for nginx:latest</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">4cf61416ee672b595b99436d0fdcf8ebe5e6d22adaed8838b29e978f19372ecb</span></span>
</span></code></pre>
<p>容器的创建过程是先到本地查找镜像，如果没有则去 Docker Hub 镜像仓库拉取镜像后再运行。</p>
<h3 id="rong-qi-lie-biao">容器列表</h3>
<p>使用命令 <code>docker ps</code> 来查看已经启动的容器，如果有停止运行的容器可以添加 <code>-a</code> 参数来查看：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker ps</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">CONTAINER</span></span><span class="z-meta z-function-call z-arguments z-shell"> ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                                   NAMES</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">4cf61416ee67</span></span><span class="z-meta z-function-call z-arguments z-shell">   nginx     <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>/docker-entrypoint.…<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>   3 minutes ago   Up 3 minutes   0.0.0.0:8080-<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span><span class="z-constant z-numeric z-integer z-decimal z-file-descriptor z-shell">80</span>/tcp, :::8080-<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span><span class="z-constant z-numeric z-integer z-decimal z-file-descriptor z-shell">80</span>/tcp   nginx1</span>
</span></code></pre>
<h3 id="guan-bi-rong-qi">关闭容器</h3>
<p>使用命令 <code>docker stop {容器ID|容器名称}</code> 来关闭容器：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker ps<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>a</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">CONTAINER</span></span><span class="z-meta z-function-call z-arguments z-shell"> ID   IMAGE         COMMAND                  CREATED         STATUS                     PORTS     NAMES</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">4cf61416ee67</span></span><span class="z-meta z-function-call z-arguments z-shell">   nginx         <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>/docker-entrypoint.…<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>   6 minutes ago   Exited (0</span><span class="z-meta z-function-call z-shell"></span>) <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">4</span></span><span class="z-meta z-function-call z-arguments z-shell"> seconds ago             nginx1</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">58e6c5af6efe</span></span><span class="z-meta z-function-call z-arguments z-shell">   hello-world   <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>/hello<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>                 12 hours ago    Exited (0</span><span class="z-meta z-function-call z-shell"></span>) <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">12</span></span><span class="z-meta z-function-call z-arguments z-shell"> hours ago              great_chatterjee</span>
</span></code></pre>
<h3 id="qi-dong-rong-qi">启动容器</h3>
<p>使用命令 <code>docker start {容器ID|容器名称}</code> 来开启容器：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker ps</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">CONTAINER</span></span><span class="z-meta z-function-call z-arguments z-shell"> ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                                   NAMES</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">4cf61416ee67</span></span><span class="z-meta z-function-call z-arguments z-shell">   nginx     <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>/docker-entrypoint.…<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>   7 minutes ago   Up 6 seconds   0.0.0.0:8080-<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span><span class="z-constant z-numeric z-integer z-decimal z-file-descriptor z-shell">80</span>/tcp, :::8080-<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span><span class="z-constant z-numeric z-integer z-decimal z-file-descriptor z-shell">80</span>/tcp   nginx1</span>
</span></code></pre>
<h3 id="zhong-qi-rong-qi">重启容器</h3>
<p>使用命令 <code>docker restart {容器ID|容器名称}</code> 来重启容器。</p>
<h3 id="jin-ru-rong-qi">进入容器</h3>
<p>使用命令 <code>docker exec -it {容器ID|容器名称} /bin/sh</code> 来进入容器，<code>/bin/sh</code> 是指定进入容器时用的终端，如果容器内有其他终端可以自行修改：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker exec<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>it</span> nginx1 /bin/sh</span>
</span><span class="z-source z-shell z-bash"><span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> exit</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker exec<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>it</span> nginx1 /bin/bash</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">root@4cf61416ee67:/#</span></span><span class="z-meta z-function-call z-arguments z-shell"> ls</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">bin</span></span><span class="z-meta z-function-call z-arguments z-shell">  boot  dev  docker-entrypoint.d  docker-entrypoint.sh  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">root@4cf61416ee67:/#</span></span><span class="z-meta z-function-call z-arguments z-shell"> exit</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-exit z-shell">exit</span></span>
</span></code></pre>
<h3 id="rong-qi-shan-chu">容器删除</h3>
<p>使用命令 <code>docker rm {容器ID|容器名称}</code> 来删除已经关闭的容器，如果容器在运行中想要强制删除可以加 <code>-f</code> 参数进行强制删除：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker ps</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">CONTAINER</span></span><span class="z-meta z-function-call z-arguments z-shell"> ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS                                   NAMES</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">4cf61416ee67</span></span><span class="z-meta z-function-call z-arguments z-shell">   nginx     <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>/docker-entrypoint.…<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>   15 minutes ago   Up 7 minutes   0.0.0.0:8080-<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span><span class="z-constant z-numeric z-integer z-decimal z-file-descriptor z-shell">80</span>/tcp, :::8080-<span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span><span class="z-constant z-numeric z-integer z-decimal z-file-descriptor z-shell">80</span>/tcp   nginx1</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker rm<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> nginx1</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx1</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker ps</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">CONTAINER</span></span><span class="z-meta z-function-call z-arguments z-shell"> ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span>
</span></code></pre>
<h3 id="rong-qi-ri-zhi">容器日志</h3>
<p>使用命令 <code>docker logs {容器ID|容器名称}</code> 来查看容器运行时的日志：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> 8081:80<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>d</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>name</span> myweb nginx</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">497eff031c03927f17fe14fcff49bea832403687d580294c42f9cfba697a1564</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker logs myweb</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">/docker-entrypoint.sh:</span></span><span class="z-meta z-function-call z-arguments z-shell"> /docker-entrypoint.d/ is not empty, will attempt to perform configuration</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">/docker-entrypoint.sh:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Looking for shell scripts in /docker-entrypoint.d/</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">/docker-entrypoint.sh:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">10-listen-on-ipv6-by-default.sh:</span></span><span class="z-meta z-function-call z-arguments z-shell"> info: Getting the checksum of /etc/nginx/conf.d/default.conf</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">10-listen-on-ipv6-by-default.sh:</span></span><span class="z-meta z-function-call z-arguments z-shell"> info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">/docker-entrypoint.sh:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Launching /docker-entrypoint.d/20-envsubst-on-templates.sh</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">/docker-entrypoint.sh:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Launching /docker-entrypoint.d/30-tune-worker-processes.sh</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">/docker-entrypoint.sh:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Configuration complete</span><span class="z-keyword z-operator z-logical z-continue z-shell">;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ready</span></span><span class="z-meta z-function-call z-arguments z-shell"> for start up</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2022/05/02</span></span><span class="z-meta z-function-call z-arguments z-shell"> 05:30:57 <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>notice<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> 1#1: using the <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>epoll<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> event method</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2022/05/02</span></span><span class="z-meta z-function-call z-arguments z-shell"> 05:30:57 <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>notice<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> 1#1: nginx/1.21.6</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2022/05/02</span></span><span class="z-meta z-function-call z-arguments z-shell"> 05:30:57 <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>notice<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> 1#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6</span><span class="z-meta z-function-call z-shell"></span>)
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2022/05/02</span></span><span class="z-meta z-function-call z-arguments z-shell"> 05:30:57 <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>notice<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> 1#1: OS: Linux 4.18.0-348.el8.0.2.x86_64</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2022/05/02</span></span><span class="z-meta z-function-call z-arguments z-shell"> 05:30:57 <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>notice<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> 1#1: getrlimit(RLIMIT_NOFILE</span><span class="z-meta z-function-call z-shell"></span>)<span class="z-meta z-function-call z-shell"><span class="z-support z-function z-colon z-shell">:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 1048576:1048576</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2022/05/02</span></span><span class="z-meta z-function-call z-arguments z-shell"> 05:30:57 <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>notice<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> 1#1: start worker processes</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2022/05/02</span></span><span class="z-meta z-function-call z-arguments z-shell"> 05:30:57 <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>notice<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> 1#1: start worker process 32</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2022/05/02</span></span><span class="z-meta z-function-call z-arguments z-shell"> 05:30:57 <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>notice<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> 1#1: start worker process 33</span>
</span></code></pre>
<h3 id="rong-qi-zhuan-jing-xiang">容器转镜像</h3>
<p>使用命令 <code>docker commit {容器ID|容器名称} 镜像名称</code> 来打包容器，如果容器在运行中可以使用 <code>-p</code> 参数：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker commit<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> myweb myweb:v1.0</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sha256:05f5efa5b56fd3d9c6d17b74ee4a3e9866095ac8cc681879dda21b9b7a968859</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker images</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">REPOSITORY</span></span><span class="z-meta z-function-call z-arguments z-shell">    TAG       IMAGE ID       CREATED         SIZE</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">myweb</span></span><span class="z-meta z-function-call z-arguments z-shell">         v1.0      05f5efa5b56f   4 seconds ago   142MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx</span></span><span class="z-meta z-function-call z-arguments z-shell">         latest    fa5269854a5e   11 days ago     142MB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">hello-world</span></span><span class="z-meta z-function-call z-arguments z-shell">   latest    feb5d9fea6a5   7 months ago    13.3kB</span>
</span></code></pre>
<h3 id="rong-qi-xin-xi">容器信息</h3>
<p>使用命令 <code>docker inspect {容器ID|容器名称}</code> 来查看容器的详细信息。这里举例筛选出容器的 IP：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker inspect myweb</span><span class="z-keyword z-operator z-logical z-pipe z-shell">|</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">grep</span></span><span class="z-meta z-function-call z-arguments z-shell"> IP</span>
</span><span class="z-source z-shell z-bash">            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>LinkLocalIPv6Address<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>LinkLocalIPv6PrefixLen<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0,</span>
</span><span class="z-source z-shell z-bash">            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>SecondaryIPAddresses<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> null,</span>
</span><span class="z-source z-shell z-bash">            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>SecondaryIPv6Addresses<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> null,</span>
</span><span class="z-source z-shell z-bash">            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>GlobalIPv6Address<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>GlobalIPv6PrefixLen<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0,</span>
</span><span class="z-source z-shell z-bash">            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>IPAddress<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>172.17.0.2<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>IPPrefixLen<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 16,</span>
</span><span class="z-source z-shell z-bash">            <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>IPv6Gateway<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">                    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>IPAMConfig<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> null,</span>
</span><span class="z-source z-shell z-bash">                    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>IPAddress<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>172.17.0.2<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">                    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>IPPrefixLen<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 16,</span>
</span><span class="z-source z-shell z-bash">                    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>IPv6Gateway<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">                    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>GlobalIPv6Address<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">                    <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>GlobalIPv6PrefixLen<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0,</span>
</span></code></pre>
<h1 id="dockerfile">Dockerfile</h1>
<h2 id="gai-shu">概述</h2>
<p>Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。</p>
<h2 id="gou-jian-can-shu">构建参数</h2>
<h3 id="copy">COPY</h3>
<p>复制指令，从上下文目录中复制到容器里面。</p>
<p>用法：</p>
<pre data-lang="dockerfile" class="language-dockerfile z-code"><code class="language-dockerfile" data-lang="dockerfile"><span class="z-source z-dockerfile">COPY [--chown=用户:组] 源路径 容器目的路径
</span></code></pre>
<p><code>--chown</code> 可以不使用。</p>
<h3 id="add">ADD</h3>
<p><code>ADD</code> 和 <code>COPY</code> 使用格式类似，同样需求下官方推荐使用 <code>COPY</code>。</p>
<h3 id="run">RUN</h3>
<p>运行命令。</p>
<p>用法：</p>
<pre data-lang="dockerfile" class="language-dockerfile z-code"><code class="language-dockerfile" data-lang="dockerfile"><span class="z-source z-dockerfile">RUN 命令
</span></code></pre>
<h3 id="cmd">CMD</h3>
<p>类似于 <code>RUN</code>，与 <code>RUN</code> 不同的是 <code>CMD</code> 是在 <code>docker run</code> 的时候执行，而 <code>RUN</code> 是在 Dockerfile 构建镜像的时候执行。</p>
<p>用法和 <code>RUN</code> 一样。</p>
<h3 id="entrypoint">ENTRYPOINT</h3>
<p>类似于 <code>CMD</code> 参数，但其不会被 <code>docker run</code> 的命令参数覆盖（当 Dockerfile 存在多个此参数的时候只会执行最后一个）。</p>
<p>用法和 <code>RUN</code>、<code>CMD</code> 一样。</p>
<h3 id="env">ENV</h3>
<p>改变环境变量，定义环境变量。</p>
<pre data-lang="dockerfile" class="language-dockerfile z-code"><code class="language-dockerfile" data-lang="dockerfile"><span class="z-source z-dockerfile">ENV key value
</span></code></pre>
<h3 id="arg">ARG</h3>
<p>和 <code>ENV</code> 效果一样，但只会在 Dockerfile 构建的时候生效，构建好容器之后不生效。</p>
<h3 id="volume">VOLUME</h3>
<p>定义默认挂载数据卷，当运行容器的时候如果没有定义位置会自动挂载。</p>
<pre data-lang="dockerfile" class="language-dockerfile z-code"><code class="language-dockerfile" data-lang="dockerfile"><span class="z-source z-dockerfile">VOLUME 路径 路径
</span></code></pre>
<h3 id="expose">EXPOSE</h3>
<p>声明端口，当使用 <code>-P</code> 运行容器的时候就是映射的这个端口。</p>
<pre data-lang="dockerfile" class="language-dockerfile z-code"><code class="language-dockerfile" data-lang="dockerfile"><span class="z-source z-dockerfile">EXPOSE 端口
</span></code></pre>
<h3 id="workdir">WORKDIR</h3>
<p>指定工作目录，就是链接时的默认目录。</p>
<pre data-lang="dockerfile" class="language-dockerfile z-code"><code class="language-dockerfile" data-lang="dockerfile"><span class="z-source z-dockerfile">WORKDIR 目录
</span></code></pre>
<h3 id="user">USER</h3>
<p>用来指定执行后续命令的用户。</p>
<pre data-lang="dockerfile" class="language-dockerfile z-code"><code class="language-dockerfile" data-lang="dockerfile"><span class="z-source z-dockerfile">USER 用户
</span></code></pre>
<h2 id="gou-jian">构建</h2>
<p>写好 Dockerfile 文件之后使用命令 <code>docker build 镜像名称:版本 dockerfile的目录</code> 来构建：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# mkdir dockerfile</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# cd dockerfile/</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> dockerfile]# vim dockerfile</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> dockerfile]# cat dockerfile</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">FROM</span></span><span class="z-meta z-function-call z-arguments z-shell"> nginx</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">RUN</span></span><span class="z-meta z-function-call z-arguments z-shell"> echo <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>我是dockerfile构建的容器<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span> <span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> /usr/share/nginx/html/index.html</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> dockerfile]# docker build<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>t</span> mynginx:v1.0 ./</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Sending</span></span><span class="z-meta z-function-call z-arguments z-shell"> build context to Docker daemon  2.048kB</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Step</span></span><span class="z-meta z-function-call z-arguments z-shell"> 1/2 : FROM nginx</span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">---</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> fa5269854a5e</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Step</span></span><span class="z-meta z-function-call z-arguments z-shell"> 2/2 : RUN echo <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>我是dockerfile构建的容器<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span> <span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> /usr/share/nginx/html/index.html</span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">---</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> Running in d73c0f94b402</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Removing</span></span><span class="z-meta z-function-call z-arguments z-shell"> intermediate container d73c0f94b402</span>
</span><span class="z-source z-shell z-bash"> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">---</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> <span class="z-constant z-numeric z-integer z-decimal z-file-descriptor z-shell">4650</span>cd039883</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Successfully</span></span><span class="z-meta z-function-call z-arguments z-shell"> built 4650cd039883</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Successfully</span></span><span class="z-meta z-function-call z-arguments z-shell"> tagged mynginx:v1.0</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> dockerfile]# docker images</span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">grep</span></span><span class="z-meta z-function-call z-arguments z-shell"> mynginx</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mynginx</span></span><span class="z-meta z-function-call z-arguments z-shell">       v1.0      4650cd039883   10 seconds ago   142MB</span>
</span></code></pre>
<h1 id="docker-de-wang-luo">Docker 的网络</h1>
<h2 id="gai-shu-1">概述</h2>
<p>Docker 网络是宿主机虚拟出来的，并不是真实存在的网络设备，外部网络无法直接访问到容器，从而实现网络的隔离。</p>
<h2 id="wang-luo-mo-shi">网络模式</h2>
<h3 id="host">Host</h3>
<p><img src="https://image.boychai.xyz/article/Docker_network_host.png" alt="host" /></p>
<p>启动容器时使用 Host 模式，那这个容器将不会获得一个独立的 IP，而是和宿主机共用一个 IP，容器将不会虚拟出自己的网卡，而是使用宿主机的 IP 和端口，但是容器其他方面，比如文件系统，进程系统都是独立的。</p>
<h3 id="container">Container</h3>
<p><img src="https://image.boychai.xyz/article/Docker_network_container.png" alt="container" /></p>
<p>启动容器时使用 Container 模式，需要指定一个容器 ID 或者容器名称，这个模式会和指定的容器共享同一个 IP，和 Host 模式一样，除了 IP 是共享对应容器的 IP 之外，容器的其他方面，比如文件系统，进程系统都是独立的。</p>
<h3 id="none">None</h3>
<p><img src="https://image.boychai.xyz/article/Docker_network_none.png" alt="none" /></p>
<p>启动容器时使用 None 模式，Docker 容器将不会生成网卡，也就是说容器会没有网卡、IP、路由等信息。需要我们自己来添加。这种网络情况只会又一个 lo 回环网卡。</p>
<h3 id="bridge">Bridge</h3>
<p><img src="https://image.boychai.xyz/article/Docker_network_bridge.png" alt="bridge" /></p>
<p>当 Docker 服务启动的时候，会在主机上创建一个 <code>docker0</code> 的虚拟网卡，此主机默认启动的容器都会链接到这个虚拟网卡上。类似于 VMware 的一个虚拟网络。</p>
<h2 id="wang-luo-guan-li">网络管理</h2>
<h3 id="wang-luo-lie-biao">网络列表</h3>
<p>使用命令 <code>docker network ls</code> 来列出所有当前网络：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker network ls</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">NETWORK</span></span><span class="z-meta z-function-call z-arguments z-shell"> ID     NAME      DRIVER    SCOPE</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ac3a791d7c38</span></span><span class="z-meta z-function-call z-arguments z-shell">   bridge    bridge    local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cb275e88b131</span></span><span class="z-meta z-function-call z-arguments z-shell">   host      host      local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">68b3fda03c16</span></span><span class="z-meta z-function-call z-arguments z-shell">   none      null      local</span>
</span></code></pre>
<h3 id="chuang-jian-wang-luo">创建网络</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> network create 参数 网络名称</span>
</span></code></pre>
<ul>
<li><code>-d</code>: 网络模式</li>
<li><code>--subnet</code>: 指定网段</li>
<li><code>--gateway</code>: 指定网关（指定虚拟网卡的 IP）</li>
</ul>
<p>自定义网络可以支持很多功能，比如不需要 DNS 可以通过容器名来互相 ping。例如，我用 <code>network create</code> 创建了一个网络，并且创建了两个容器 <code>os1</code>、<code>os2</code>，使用 <code>os1</code> ping <code>os2</code> 的时候会互通，不需要配置任何 DNS，它会自动寻找，而默认的 <code>docker0</code> 则没有这个功能。</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker network create<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>d</span> bridge<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>subnet</span> 192.168.1.0/24<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>gateway</span> 192.168.1.254 mynetwork</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">5fb087dccbabedf4b97fcc09b448ee717acbfa35fc520698985f536dea8be5e7</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker network ls</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">NETWORK</span></span><span class="z-meta z-function-call z-arguments z-shell"> ID     NAME        DRIVER    SCOPE</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ac3a791d7c38</span></span><span class="z-meta z-function-call z-arguments z-shell">   bridge      bridge    local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cb275e88b131</span></span><span class="z-meta z-function-call z-arguments z-shell">   host        host      local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">5fb087dccbab</span></span><span class="z-meta z-function-call z-arguments z-shell">   mynetwork   bridge    local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">68b3fda03c16</span></span><span class="z-meta z-function-call z-arguments z-shell">   none        null      local</span>
</span></code></pre>
<h3 id="shan-chu-wang-luo">删除网络</h3>
<p>使用命令 <code>docker network rm {网络ID|网络名称}</code>：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker network ls</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">NETWORK</span></span><span class="z-meta z-function-call z-arguments z-shell"> ID     NAME        DRIVER    SCOPE</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ac3a791d7c38</span></span><span class="z-meta z-function-call z-arguments z-shell">   bridge      bridge    local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cb275e88b131</span></span><span class="z-meta z-function-call z-arguments z-shell">   host        host      local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">5fb087dccbab</span></span><span class="z-meta z-function-call z-arguments z-shell">   mynetwork   bridge    local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">68b3fda03c16</span></span><span class="z-meta z-function-call z-arguments z-shell">   none        null      local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker network rm mynetwork</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mynetwork</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker network ls</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">NETWORK</span></span><span class="z-meta z-function-call z-arguments z-shell"> ID     NAME      DRIVER    SCOPE</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ac3a791d7c38</span></span><span class="z-meta z-function-call z-arguments z-shell">   bridge    bridge    local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cb275e88b131</span></span><span class="z-meta z-function-call z-arguments z-shell">   host      host      local</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">68b3fda03c16</span></span><span class="z-meta z-function-call z-arguments z-shell">   none      null      local</span>
</span></code></pre>
<h3 id="guan-lian-rong-qi">关联容器</h3>
<p><code>docker network connect</code> 命令是用于将 Docker 容器连接/断开到某个网络中，或者与其他容器建联/断开，容器可以使用容器名或者容器 ID。</p>
<p>用法：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> network connect/disconnect <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>网络ID|网络名称<span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span> <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>容器ID|容器名称<span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span></span>
</span></code></pre>
<h3 id="xiang-xi-xin-xi">详细信息</h3>
<p>使用命令 <code>docker network inspect {网络ID|网络名称}</code> 来查询网络的详细信息：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker network create<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>d</span> bridge<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>subnet</span> 192.168.1.0/24<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>gateway</span> 192.168.1.254 mynetwork</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">af5233ce4e299130cadee1bc8c9754b576bfb63d6ac229ad7856a653b2109e1e</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker network inspect mynetwork</span>
</span><span class="z-source z-shell z-bash"><span class="z-support z-function z-test z-begin z-shell">[</span>
</span><span class="z-source z-shell z-bash">    <span class="z-punctuation z-definition z-compound z-braces z-begin z-shell">{</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Name<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>mynetwork<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Id<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>af5233ce4e299130cadee1bc8c9754b576bfb63d6ac229ad7856a653b2109e1e<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Created<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>2022-05-02T02:44:46.644429172-04:00<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Scope<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>local<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Driver<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>bridge<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>EnableIPv6<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> false,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>IPAM<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">            <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Driver<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>: <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>default<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span><span class="z-punctuation z-separator z-shell">,</span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">            <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Options<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>: <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span><span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span><span class="z-punctuation z-separator z-shell">,</span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">            <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Config<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>: [
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">                <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">                    <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Subnet<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>: <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>192.168.1.0/24<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span><span class="z-punctuation z-separator z-shell">,</span>
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">                    <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Gateway<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>: <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>192.168.1.254<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">                <span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">            ]
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        <span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Internal<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> false,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Attachable<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> false,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Ingress<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> false,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>ConfigFrom<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">            <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Network<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>: <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span><span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-meta z-group z-expansion z-brace z-shell">        <span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>ConfigOnly<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> false,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Containers<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span><span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Options<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span><span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span>,</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>Labels<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span><span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span></span>
</span><span class="z-source z-shell z-bash">    <span class="z-punctuation z-definition z-compound z-braces z-end z-shell">}</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">]</span></span>
</span></code></pre>
<h1 id="docker-compose-rong-qi-bian-pai">Docker-Compose 容器编排</h1>
<h2 id="gai-shu-2">概述</h2>
<p>Docker Compose 可以轻松、高效地管理容器，它是一个用于定义和运行多个容器的 Docker 应用程序工具。在生产环境中，一个应用通常由多个 Docker 容器构成，而单纯的 Docker 一次性只能实现单个容器的部署，为了解决这个问题，Docker Compose 应运而生。</p>
<h2 id="an-zhuang-1">安装</h2>
<p><strong>官方下载文档</strong>: <a href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a></p>
<p>Docker 默认不自带 Docker Compose 工具，需要手动下载：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# curl<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>SL</span> https://github.com/docker/compose/releases/download/v2.4.1/docker-compose-linux-x86_64<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>o</span> /usr/bin/docker-compose</span>
</span><span class="z-source z-shell z-bash">  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell"><span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span></span></span><span class="z-meta z-function-call z-arguments z-shell"> Total    <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> Received <span class="z-meta z-group z-expansion z-job z-shell"><span class="z-punctuation z-definition z-variable z-job z-shell">%</span></span> Xferd  Average Speed   Time    Time     Time  Current</span>
</span><span class="z-source z-shell z-bash">                                 <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Dload</span></span><span class="z-meta z-function-call z-arguments z-shell">  Upload   Total   Spent    Left  Speed</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">100</span></span><span class="z-meta z-function-call z-arguments z-shell">   664  100   664    0     0   1412      0 --:--:-- --:--:-- --:--:--  1412</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">100</span></span><span class="z-meta z-function-call z-arguments z-shell"> 25.2M  100 25.2M    0     0   239k      0  0:01:48  0:01:48 --:--:--  365k</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# chmod +x /usr/bin/docker-compose</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# docker-compose<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>v</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> Compose version v2.4.1</span>
</span></code></pre>
<h2 id="shi-yong-he-guan-li">使用和管理</h2>
<h3 id="shi-yong">使用</h3>
<p>使用 Docker Compose 需要在目录里定义一个名称为 <code>docker-compose.yml</code> 的 YML 文件，这个文件用来定义服务配置，之后可以使用 Docker Compose 来管理这个文件里定义的资源。</p>
<p>官方文档: <a href="https://docs.docker.com/compose/">Docker-Compose</a></p>
<h3 id="qi-dong">启动</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker-compose</span></span><span class="z-meta z-function-call z-arguments z-shell"> up</span>
</span></code></pre>
<p>在当前目录定义好 <code>docker-compose.yml</code> 文件之后可以使用此命令来运行，默认在前台运行，可以追加 <code>-d</code> 参数使其运行在后台。</p>
<h3 id="zhong-xin-yun-xing">重新运行</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker-compose</span></span><span class="z-meta z-function-call z-arguments z-shell"> restart</span>
</span></code></pre>
<p>重启全部定义的容器资源。</p>
<h3 id="ting-zhi-yun-xing">停止运行</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker-compose</span></span><span class="z-meta z-function-call z-arguments z-shell"> stop</span>
</span></code></pre>
<p>停止运行定义的容器。</p>
<h3 id="shan-chu">删除</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker-compose</span></span><span class="z-meta z-function-call z-arguments z-shell"> down</span>
</span></code></pre>
<p>停止并删除对应的容器。</p>
<h2 id="yml-pei-zhi-can-kao">YML 配置参考</h2>
<h3 id="docker-compose-yml-de-ge-shi">docker-compose.yml 的格式</h3>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> 全局配置层
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>      <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> 版本
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span># 定义层
</span></span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">app1</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span># 配置层
</span></span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">nginx:1.26</span>    <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> 镜像
</span></span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ports</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">80:80</span>         <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> 端口映射
</span></span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">environment</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">aa=bb</span>   <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> 系统环境
</span></span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">volumes</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>             <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> 挂载卷定义
</span></span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">networks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>            <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> 网络定义
</span></span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">app2</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">app3</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-constant z-numeric z-float z-decimal z-yaml"><span class="z-punctuation z-separator z-decimal z-yaml">.</span>..</span>
</span></code></pre>
<h3 id="version">version</h3>
<p>这个版本需要和 Docker 的版本相对应，具体对应信息可去官网查看：<a href="https://docs.docker.com/compose/compose-file/compose-versioning/">版本对照</a></p>
<h3 id="build">build</h3>
<p>在配置层定义，如果自己定义了 Dockerfile 想让 Docker Compose 来运行，可以直接使用 <code>build</code> 来构建：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">build</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-float z-decimal z-yaml"><span class="z-punctuation z-separator z-decimal z-yaml">.</span></span>
</span></code></pre>
<h3 id="image">image</h3>
<p>在配置层定义，用来指定镜像：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">nginx</span>
</span></code></pre>
<h3 id="command">command</h3>
<p>在配置层定义，修改容器启动时执行的命令：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">centos</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">command</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>bash<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span></code></pre>
<h3 id="container-name">container_name</h3>
<p>在配置层定义，默认 Docker Compose 启动容器的名称格式为 <code>&lt;项目名称&gt;_&lt;服务名称&gt;_&lt;序号&gt;</code>，这个参数可以直接修改容器的名字：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">container_name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">myapp</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">centos</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">command</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>bash<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span></code></pre>
<h3 id="environment">environment</h3>
<p>在配置层定义，定义容器的环境变量：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">container_name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">mySQL</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">mariadb</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">environment</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">MYSQL_ROOT_PASSWORD</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">aaaaaa</span>
</span></code></pre>
<h3 id="env-file">env_file</h3>
<p>在配置层定义，和 <code>environment</code> 一样用来定义环境变量，它指定一个文件，直接使用 <code>environment</code> 来定义环境变量可能会有一些敏感信息不适合直接放在 <code>docker-compose.yml</code> 里，<code>env_file</code> 可以指定一个环境文件，文件格式为键值对的方式 <code>key=value</code>：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">container_name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">mySQL</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">mariadb</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">env_file</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">./env</span>
</span></code></pre>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@boychai</span></span><span class="z-meta z-function-call z-arguments z-shell"> docker-compose]# cat env</span>
</span><span class="z-source z-shell z-bash"><span class="z-variable z-other z-readwrite z-assignment z-shell">MYSQL_ROOT_PASSWORD</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">aaaaaaa</span>
</span></code></pre>
<h3 id="depends-on">depends_on</h3>
<p>在配置层定义，用来配置启动关系，配置了之后里面写其他服务容器的名称，只有里面定义的容器启动后，自己才会启动，可以理解为服务容器启动的前提条件：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">web</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">build</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-float z-decimal z-yaml"><span class="z-punctuation z-separator z-decimal z-yaml">.</span></span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">depends_on</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">db</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">redis</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">redis</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">redis</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">db</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">mysql</span>
</span></code></pre>
<h3 id="restart">restart</h3>
<p>在配置层定义，用来配置重启策略，模式如下：</p>
<ul>
<li><code>no</code>: 默认的重启策略，在任何情况下都不会重启容器</li>
<li><code>always</code>: 容器总是重新启动</li>
<li><code>on-failure</code>: 在容器非正常退出时（退出状态非 0），才会重启容器</li>
<li><code>unless-stopped</code>: 在容器退出时总是重启容器，但不考虑在 Docker 守护进程启动时就已经停止了的容器</li>
</ul>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">web</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">restart</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">always</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">build</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-float z-decimal z-yaml"><span class="z-punctuation z-separator z-decimal z-yaml">.</span></span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">depends_on</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">db</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">redis</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">redis</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">restart</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">always</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">redis</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">db</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">restart</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">always</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">mysql</span>
</span></code></pre>
<h3 id="volumes">volumes</h3>
<p>在配置层定义，用来把主机的数据卷或文件挂载到容器里：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">nginx:latest</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">volumes</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>/usr/nginx/html:/usr/share/nginx/html<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>/var/log/nginx:/var/log/nginx<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span></code></pre>
<p>也可以在全局层进行声明，然后配置层进行调用：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">nginx:latest</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">volumes</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">nginx_html:/usr/share/nginx/html</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">nginx_log:/var/log/nginx</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">volumes</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">nginx_html</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">/usr/nginx/html</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">nginx_log</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">/var/log/nginx</span>
</span></code></pre>
<h3 id="networks">networks</h3>
<p>网络配置，默认不声明的话 Docker 会自动生成一个默认的 Bridge 类型的网络，在全局配置层定义一个 <code>networks</code>：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">nginx:latest</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">networks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">default</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">driver</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">bridge</span>
</span></code></pre>
<p>定义默认网络模式为 Bridge，如果容器不指定则全部使用 Bridge。我们还可以自定义一个网络名字，之后在容器的配置层进行绑定这个名字：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">nginx:latest</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">networks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">mynetwork</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">networks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">mynetwork</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">driver</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">bridge</span>
</span></code></pre>
<p>也可以绑定已存在的网络：</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">myapp</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">nginx:latest</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">networks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">mynetwork</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">networks</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">mynetwork</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">external</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">network-test</span>
</span></code></pre>
<h3 id="qi-ta">其他</h3>
<p>关于 Docker Compose 的配置有很多，这里只是介绍了部分常用的配置，更多具体的配置可以去官网查看：<a href="https://docs.docker.com/compose/compose-file/compose-file-v3/">更多配置</a></p>
<h2 id="shi-li">实例</h2>
<p>这里使用 Docker Compose 的方式部署一个 WordPress 的博客，提供配置参考学习使用。</p>
<p><a href="https://hub.docker.com/_/wordpress?tab=description">官方教程</a></p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@boychai</span></span><span class="z-meta z-function-call z-arguments z-shell"> wp]# cat <span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> docker-compose.yml <span class="z-string z-unquoted z-heredoc z-shell"><span class="z-keyword z-operator z-assignment z-redirection z-shell">&lt;&lt;</span><span class="z-keyword z-control z-heredoc-token z-shell">EOF</span></span><span class="z-string z-unquoted z-heredoc z-shell">
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">version: &#39;3.1&#39;
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">services:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">  wordpress:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">    image: wordpress
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">    restart: always
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">    ports:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      - 8080:80
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">    environment:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      WORDPRESS_DB_HOST: db
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      WORDPRESS_DB_USER: exampleuser
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      WORDPRESS_DB_PASSWORD: examplepass
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      WORDPRESS_DB_NAME: exampledb
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">    volumes:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      - wordpress:/var/www/html
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">  db:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">    image: mysql:5.7
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">    restart: always
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">    environment:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      MYSQL_DATABASE: exampledb
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      MYSQL_USER: exampleuser
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      MYSQL_PASSWORD: examplepass
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      MYSQL_RANDOM_ROOT_PASSWORD: &#39;1&#39;
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">    volumes:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">      - db:/var/lib/mysql
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">volumes:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">  wordpress:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell">  db:
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell"><span class="z-string z-unquoted z-heredoc z-shell"><span class="z-keyword z-control z-heredoc-token z-shell">EOF</span></span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@boychai</span></span><span class="z-meta z-function-call z-arguments z-shell"> wp]# docker-compose up<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>d</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Creating</span></span><span class="z-meta z-function-call z-arguments z-shell"> network <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>wp_default<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> with the default driver</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Creating</span></span><span class="z-meta z-function-call z-arguments z-shell"> volume <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>wp_wordpress<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> with default driver</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Creating</span></span><span class="z-meta z-function-call z-arguments z-shell"> volume <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>wp_db<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> with default driver</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Pulling</span></span><span class="z-meta z-function-call z-arguments z-shell"> wordpress (wordpress:</span><span class="z-meta z-function-call z-shell"></span>)<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">...</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">latest:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pulling from library/wordpress</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">a2abf6c4d29d:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">c5608244554d:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">2d07066487a0:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">1b6dfaf1958c:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">32c5e6a60073:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">90cf855b27cc:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">8b0f1068c586:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">5355461305e8:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ad1eec592342:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">e03fbc76cb78:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">1f5796e48b39:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">72fbe8e1d4e7:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">96edece66175:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Already exists</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">5f46f0743de2:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">c9f9671a5e1f:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">3f543dcd35b1:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">c88e21a0c2a0:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">964b4457a910:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">0d55fb9a64ef:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">fb009ff7c567:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">4f058a67a50d:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Pull complete</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Digest:</span></span><span class="z-meta z-function-call z-arguments z-shell"> sha256:fc33b796b04162a0db2e9ea9b4c361a07058b21597b1317ad9ab3ea4593de241</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Status:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Downloaded newer image for wordpress:latest</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Creating</span></span><span class="z-meta z-function-call z-arguments z-shell"> wp_db_1        ... done</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Creating</span></span><span class="z-meta z-function-call z-arguments z-shell"> wp_wordpress_1 ... done</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@boychai</span></span><span class="z-meta z-function-call z-arguments z-shell"> wp]#</span>
</span></code></pre>
<p>访问服务器地址加 8080 端口即可出现博客初始化页面，如下图：</p>
<p><img src="https://image.boychai.xyz/article/Docker_Compose01.png" alt="效果" /></p>

        </section>
        
        

        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
        </article>
</main>

    <div id="button-container">
        
        
            <div id="toc-floating-container">
                <input type="checkbox" id="toc-toggle" class="toggle"/>
                <label for="toc-toggle" id="toc-button" class="button" title="Toggle Table of Contents">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg>
                </label>
                <div class="toc-content">
                    

<div class="toc-container">
    

    <ul>
        
            
            
                <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#docker-gai-shu">Docker 概述</a>
                    
                </li>
            
        
            
            
                <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#docker-de-an-zhuang">Docker 的安装</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#xie-zai-jiu-ban-ben-yi-ji-can-liu">卸载旧版本以及残留</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#she-zhi-docker-de-yum-ruan-jian-cang-ku">设置 Docker 的 YUM 软件仓库</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#an-zhuang">安装</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#she-zhi-docker-kai-ji-zi-qi-bing-qi-dong">设置 Docker 开机自启并启动</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#yun-xing-yi-ge-docker-ce-shi-jing-xiang-lai-yan-zheng-an-zhuang">运行一个 Docker 测试镜像来验证安装</a>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#docker-de-ming-ling">Docker 的命令</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#jing-xiang-de-guan-li">镜像的管理</a>
                                        
                                            <ul>
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#sou-suo-jian-suo">搜索&#x2F;检索</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#xia-zai-la-qu">下载&#x2F;拉取</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#jing-xiang-lie-biao">镜像列表</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#jing-xiang-biao-qian">镜像标签</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#jing-xiang-shan-chu">镜像删除</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#jing-xiang-dao-chu">镜像导出</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#jing-xiang-dao-ru">镜像导入</a>
                                                            
                                                        </li>
                                                    
                                                
                                            </ul>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#rong-qi-de-guan-li">容器的管理</a>
                                        
                                            <ul>
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#chuang-jian-rong-qi">创建容器</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#rong-qi-lie-biao">容器列表</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#guan-bi-rong-qi">关闭容器</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#qi-dong-rong-qi">启动容器</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#zhong-qi-rong-qi">重启容器</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#jin-ru-rong-qi">进入容器</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#rong-qi-shan-chu">容器删除</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#rong-qi-ri-zhi">容器日志</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#rong-qi-zhuan-jing-xiang">容器转镜像</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#rong-qi-xin-xi">容器信息</a>
                                                            
                                                        </li>
                                                    
                                                
                                            </ul>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#dockerfile">Dockerfile</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#gai-shu">概述</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#gou-jian-can-shu">构建参数</a>
                                        
                                            <ul>
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#copy">COPY</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#add">ADD</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#run">RUN</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#cmd">CMD</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#entrypoint">ENTRYPOINT</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#env">ENV</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#arg">ARG</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#volume">VOLUME</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#expose">EXPOSE</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#workdir">WORKDIR</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#user">USER</a>
                                                            
                                                        </li>
                                                    
                                                
                                            </ul>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#gou-jian">构建</a>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#docker-de-wang-luo">Docker 的网络</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#gai-shu-1">概述</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#wang-luo-mo-shi">网络模式</a>
                                        
                                            <ul>
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#host">Host</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#container">Container</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#none">None</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#bridge">Bridge</a>
                                                            
                                                        </li>
                                                    
                                                
                                            </ul>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#wang-luo-guan-li">网络管理</a>
                                        
                                            <ul>
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#wang-luo-lie-biao">网络列表</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#chuang-jian-wang-luo">创建网络</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#shan-chu-wang-luo">删除网络</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#guan-lian-rong-qi">关联容器</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#xiang-xi-xin-xi">详细信息</a>
                                                            
                                                        </li>
                                                    
                                                
                                            </ul>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#docker-compose-rong-qi-bian-pai">Docker-Compose 容器编排</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#gai-shu-2">概述</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#an-zhuang-1">安装</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#shi-yong-he-guan-li">使用和管理</a>
                                        
                                            <ul>
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#shi-yong">使用</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#qi-dong">启动</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#zhong-xin-yun-xing">重新运行</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#ting-zhi-yun-xing">停止运行</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#shan-chu">删除</a>
                                                            
                                                        </li>
                                                    
                                                
                                            </ul>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#yml-pei-zhi-can-kao">YML 配置参考</a>
                                        
                                            <ul>
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#docker-compose-yml-de-ge-shi">docker-compose.yml 的格式</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#version">version</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#build">build</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#image">image</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#command">command</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#container-name">container_name</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#environment">environment</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#env-file">env_file</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#depends-on">depends_on</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#restart">restart</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#volumes">volumes</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#networks">networks</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#qi-ta">其他</a>
                                                            
                                                        </li>
                                                    
                                                
                                            </ul>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://synex.space/blog/docker-rong-qi-guan-li/#shi-li">实例</a>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
    </ul>
</div>


                </div>
            </div>
        

        
        

        
        <a href="#" id="top-button" class="no-hover-padding" title="Go to the top of the page">
            <svg viewBox="0 0 20 20" fill="currentColor"><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg>
        </a>
    </div>


<span id="copy-success" class="hidden">
        Copied!
    </span>
    <span id="copy-init" class="hidden">
        Copy code to clipboard
    </span>
    <script defer src="https://synex.space/js/copyCodeToClipboard.min.js"></script>


    </div>
    <footer>
    <section>
        <nav class="socials nav-navs">
        </nav>

        
        <nav class="nav-navs">
        </nav>

        <div class="credits">
            <small>
                

                
                Powered by
                <a rel="" 

 href="https://www.getzola.org">Zola</a>
                &amp;
                <a rel="" 

 href="https://github.com/welpo/tabi">tabi</a>

                </small>
        </div>
    </section>

    <div id="searchModal" class="search-modal js" role="dialog" aria-labelledby="modalTitle">
    <h1 id="modalTitle" class="visually-hidden">Search</h1>
    <div id="modal-content">
        <div id="searchBar">
            <div class="search-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                    <path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
                </svg>
            </div>
            <input id="searchInput" role="combobox" autocomplete="off" spellcheck="false" aria-expanded="false" aria-controls="results-container" placeholder="Search…"/>
            <div id="clear-search" class="close-icon interactive-icon" tabindex="0" role="button" title="Clear search">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                </svg>
            </div>
        </div>
        <div id="results-container">
            <div id="results-info"><span id="zero_results"> No results</span>
                <span id="one_results"> $NUMBER result</span>
                <span id="many_results"> $NUMBER results</span><span id="two_results"> $NUMBER results</span>
                <span id="few_results"> $NUMBER results</span>
            </div>
            <div id="results" role="listbox"></div>
        </div>
    </div>
</div>
</footer>


    
    
</body>

</html>
