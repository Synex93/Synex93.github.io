<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="UTF-8"><meta http-equiv="Content-Security-Policy"
content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com;connect-src 'self';script-src 'self' 'self'">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="base" content="https://synex.space/">

    
    <title>
~/S9n3x • ngx_lua模块学习</title>

    
    
    

    
    

    
    
    
        
            <link rel="stylesheet" href="https://synex.space/custom_subset.css?h=0b9535a28bc3d5bf2321">
        
    

    
        <link rel="stylesheet" href="https://synex.space/main.css?h=3716ab3457d2dd050b3c" />
        <link rel="stylesheet" href="https://synex.space/skins/mint.css?h=504215cf6bc10586b487" />

    <meta name="color-scheme" content="light dark" />
        <meta name="description" content="" />
        <meta property="og:description" content="" />

    

    <meta property="og:title" content="ngx_lua模块学习" />
    <meta property="og:type" content="article" />

    
<meta property="og:locale" content="en_GB" />

    <meta property="og:url" content="https:&#x2F;&#x2F;synex.space&#x2F;blog&#x2F;ngx-luamo-kuai-xue-xi&#x2F;" /><meta property="og:site_name" content="~&#x2F;S9n3x">
        <noscript><link rel="stylesheet" href="https://synex.space/no_js.css"/></noscript>
        <script type="text/javascript" src="https://synex.space/js/initializeTheme.min.js"></script>
        <script defer src="https://synex.space/js/themeSwitcher.min.js"></script>
        <script defer src="https://synex.space/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e"></script>

        
    
</head>


<body>
    <a href="#main-content" id="skip-link">Skip to content</a>
    <header>
    <nav class="navbar">
        <div class="nav-title">
            <a class="home-title" href="https://synex.space/">~&#x2F;S9n3x</a>
        </div>
            <div class="nav-navs">
                <ul>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://synex.space/blog/">blog
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://synex.space/archive/">archive
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://synex.space/tags/">tags
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://synex.space/friends/">friends
                                </a>
                            </li>
                        <li class="menu-icons-container">
                        <ul class="menu-icons-group">
                            <li class="js menu-icon">
                                <div role="button" tabindex="0" id="search-button" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" aria-label="Click or press $SHORTCUT to open search">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                                        <path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
                                    </svg>
                                </div>
                            </li>

                            
                            

                            <li class="theme-switcher-wrapper js"><div
        title="Toggle dark&#x2F;light mode"
        class="theme-switcher"
        tabindex="0"
        role="button"
        aria-label="Toggle dark mode"
        aria-pressed="false">
    </div><div
        title="Reset mode to default"
        class="theme-resetter arrow"
        tabindex="0"
        role="button"
        aria-hidden="true"
        aria-label="Reset mode to default">
    </div>

</li>
</ul>
                    </li>
                </ul>
            </div>
        
    </nav>
</header>

    <div class="content" id="main-content">

        
        





<main>
    <article class="h-entry">
        <h1 class="p-name article-title">
            ngx_lua模块学习
        </h1>
        <a class="u-url u-uid" href="https://synex.space/blog/ngx-luamo-kuai-xue-xi/"></a>

        <ul class="meta"><span class="hidden p-author h-card">
<a rel="author" href="https:&#x2F;&#x2F;synex.space&#x2F;" class="u-url " title=""></a>
</span>
<li><time class="dt-published" datetime="2024-04-25T20:51:00">25th Apr 2024</time></li><li title="1087 words"><span class='separator' aria-hidden='true'>•</span>6 min read</li><li class="tag"><span class='separator' aria-hidden='true'>•</span>Tags:&nbsp;</li><li class="tag"><a class="p-category" href="https://synex.space/tags/nginx/">nginx</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://synex.space/tags/ngx-lua/">ngx_lua</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://synex.space/tags/lua/">lua</a></li>
        </ul><section class="e-content body"><h2 id="gai-shu">概述</h2>
<p>淘宝开发的ngx_lua模块通过将lua解释器解释器集成Nginx，可以采用lua脚本实现业务逻辑，由于lua的紧凑、快速以及内建协程，所以在保证高并发服务能力的同时极大降低了业务逻辑实现成本。</p>
<h2 id="an-zhuang-fang-shi-1-yi-qi-yong">安装方式1(已弃用)</h2>
<h3 id="lua-nginx-module">lua-nginx-module</h3>
<p>LuaJIT是采用C语言编写的Lua代表的解释器。
官网: http://luajit.org
在官网找到对应下载地址: https://github.com/LuaJIT/LuaJIT/tags</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> env]# wget https://github.com/LuaJIT/LuaJIT/archive/refs/tags/v2.0.5.tar.gz</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> env]# tar xvf v2.0.5.tar.gz </span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> env]# cd LuaJIT-2.0.5/</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> LuaJIT-2.0.5]# make</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">make</span></span><span class="z-meta z-function-call z-arguments z-shell"> install</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">make[1]:</span></span><span class="z-meta z-function-call z-arguments z-shell"> Leaving directory <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>/opt/env/LuaJIT-2.0.5/src<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span><span class="z-source z-shell z-bash"><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">===</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Successfully</span></span><span class="z-meta z-function-call z-arguments z-shell"> built LuaJIT 2.0.5 ====</span>
</span><span class="z-source z-shell z-bash"><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">===</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Installing</span></span><span class="z-meta z-function-call z-arguments z-shell"> LuaJIT 2.0.5 to /usr/local ====</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mkdir</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> /usr/local/bin /usr/local/lib /usr/local/include/luajit-2.0 /usr/local/share/man/man1 /usr/local/lib/pkgconfig /usr/local/share/luajit-2.0.5/jit /usr/local/share/lua/5.1 /usr/local/lib/lua/5.1</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> src</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">install</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>m</span> 0755 luajit /usr/local/bin/luajit-2.0.5</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> src</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">test</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> libluajit.a</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">install</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>m</span> 0644 libluajit.a /usr/local/lib/libluajit-5.1.a</span> <span class="z-keyword z-operator z-logical z-or z-shell">||</span> <span class="z-meta z-function-call z-shell"><span class="z-support z-function z-colon z-shell">:</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rm</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> /usr/local/bin/luajit /usr/local/lib/libluajit-5.1.so.2.0.5 /usr/local/lib/libluajit-5.1.so /usr/local/lib/libluajit-5.1.so.2</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> src</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">test</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> libluajit.so</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span><span class="z-source z-shell z-bash">  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">install</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>m</span> 0755 libluajit.so /usr/local/lib/libluajit-5.1.so.2.0.5</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span><span class="z-source z-shell z-bash">  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ldconfig</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>n</span> /usr/local/lib</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span><span class="z-source z-shell z-bash">  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ln</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>sf</span> libluajit-5.1.so.2.0.5 /usr/local/lib/libluajit-5.1.so</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span><span class="z-source z-shell z-bash">  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ln</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>sf</span> libluajit-5.1.so.2.0.5 /usr/local/lib/libluajit-5.1.so.2</span> <span class="z-keyword z-operator z-logical z-or z-shell">||</span> <span class="z-meta z-function-call z-shell"><span class="z-support z-function z-colon z-shell">:</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> etc</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">install</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>m</span> 0644 luajit.1 /usr/local/share/man/man1</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> etc</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sed</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>e</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>s|^prefix=.*|prefix=/usr/local|<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>e</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>s|^multilib=.*|multilib=lib|<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> luajit.pc <span class="z-keyword z-operator z-assignment z-redirection z-shell">&gt;</span> luajit.pc.tmp</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span><span class="z-source z-shell z-bash">  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">install</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>m</span> 0644 luajit.pc.tmp /usr/local/lib/pkgconfig/luajit.pc</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span><span class="z-source z-shell z-bash">  <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rm</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> luajit.pc.tmp</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> src</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">install</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>m</span> 0644 lua.h lualib.h lauxlib.h luaconf.h lua.hpp luajit.h /usr/local/include/luajit-2.0</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> src/jit</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">install</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>m</span> 0644 bc.lua v.lua dump.lua dis_x86.lua dis_x64.lua dis_arm.lua dis_ppc.lua dis_mips.lua dis_mipsel.lua bcsave.lua vmdef.lua /usr/local/share/luajit-2.0.5/jit</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ln</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>sf</span> luajit-2.0.5 /usr/local/bin/luajit</span>
</span><span class="z-source z-shell z-bash"><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">===</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Successfully</span></span><span class="z-meta z-function-call z-arguments z-shell"> installed LuaJIT 2.0.5 to /usr/local ====</span>
</span></code></pre>
<h3 id="lua-nginx-module-1">lua-nginx-module</h3>
<p>nginx第三方模块lua-nginx-module
官网: https://github.com/openresty/lua-nginx-module</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> env]# wget https://github.com/openresty/lua-nginx-module/archive/refs/tags/v0.10.26.tar.gz</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> env]# tar xvf v0.10.26.tar.gz </span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> env]# ln<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>s</span> lua-nginx-module-0.10.26 lua-nginx-module</span>
</span></code></pre>
<h3 id="huan-jing-bian-liang-she-zhi">环境变量设置</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# tail<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>n2</span> /etc/profile</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-storage z-modifier z-shell">export</span> <span class="z-variable z-other z-readwrite z-assignment z-shell">LUAJIT_LIB</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">/usr/local/lib</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-storage z-modifier z-shell">export</span> <span class="z-variable z-other z-readwrite z-assignment z-shell">LUAJIT_INC</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">/usr/local/include/luajit-2.0</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# source /etc/profile</span>
</span></code></pre>
<h3 id="kuo-zhan-nginxmo-kuai">扩展nginx模块</h3>
<p>打开nginx编译安装的位置 进行重新编译安装</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> nginx-1.24.0]# ./configure<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  --</span>prefix</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/usr/local/nginx<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  --</span>sbin-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/usr/local/nginx/sbin/nginx<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>conf-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/usr/local/nginx/conf/nginx.conf<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>error-log-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/var/log/nginx/error.log<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  --</span>http-log-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/var/log/nginx/access.log<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  --</span>pid-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/var/run/nginx/nginx.pid<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>lock-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/var/lock/nginx.lock<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  --</span>user</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>nginx<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>group</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>nginx<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>with-http_ssl_module</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>with-http_stub_status_module</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>with-http_gzip_static_module</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>http-client-body-temp-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/var/tmp/nginx/client/<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>http-proxy-temp-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/var/tmp/nginx/proxy/<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>http-fastcgi-temp-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/var/tmp/nginx/fcgi/<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>http-uwsgi-temp-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/var/tmp/nginx/uwsgi<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>http-scgi-temp-path</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/var/tmp/nginx/scgi<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>with-pcre</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>add-module</span><span class="z-keyword z-operator z-assignment z-option z-shell">=</span>/opt/package/nginx/lua-nginx-module</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> nginx-1.24.0]# make</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">make</span></span><span class="z-meta z-function-call z-arguments z-shell"> install</span>
</span></code></pre>
<p>扩展的重点是<code>--with-pcre --add-module=/opt/package/nginx/lua-nginx-module</code>
这里就相当于重新安装了，之前安装的模块还需要再这里再添加一遍</p>
<h3 id="cuo-wu">错误</h3>
<h4 id="libluajit-5-1-so-2">libluajit-5.1.so.2</h4>
<p>当在扩展号nginx模块后执行nginx相关命令出现以下错误</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# nginx<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>V</span></span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx:</span></span><span class="z-meta z-function-call z-arguments z-shell"> error while loading shared libraries: libluajit-5.1.so.2: cannot open shared object file: No such file or directory</span>
</span></code></pre>
<p>这个错误表明 Nginx 在启动时无法找到名为 libluajit-5.1.so.2 的共享库文件。这很可能是由于 Nginx 模块依赖 LuaJIT 库，但系统中缺少了该库所致。解决办法如下</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>]# ln<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>s</span> /usr/local/lib/libluajit-5.1.so.2 /lib64/liblua-5.1.so.2</span>
</span></code></pre>
<h3 id="reason-module-resty-core-not-found">reason: module 'resty.core' not found</h3>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> conf]# nginx</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>alert<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> detected a LuaJIT version which is not OpenResty<span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>s; many optimizations will be disabled and performance will be compromised (see https://github.com/openresty/luajit2 for OpenResty<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span>s LuaJIT or, even better, consider using the OpenResty releases from https://openresty.org/en/download.html</span><span class="z-meta z-function-call z-shell"></span>)
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">nginx:</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span>alert<span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span> failed to load the <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>resty.core<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span> module (https://github.com/openresty/lua-resty-core</span><span class="z-meta z-function-call z-shell"></span>)<span class="z-keyword z-operator z-logical z-continue z-shell">;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ensure</span></span><span class="z-meta z-function-call z-arguments z-shell"> you are using an OpenResty release from https://openresty.org/en/download.html (reason: module <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>resty.core<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span> not found:</span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> field package.preload<span class="z-keyword z-control z-regexp z-set z-begin z-shell">[</span><span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>resty.core<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span><span class="z-keyword z-control z-regexp z-set z-end z-shell">]</span></span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> file <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>./resty/core.lua<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> file <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>/usr/local/share/luajit-2.0.5/resty/core.lua<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> file <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>/usr/local/share/lua/5.1/resty/core.lua<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> file <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>/usr/local/share/lua/5.1/resty/core/init.lua<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> file <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>./resty/core.so<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> file <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>/usr/local/lib/lua/5.1/resty/core.so<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> file <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>/usr/local/lib/lua/5.1/loadall.so<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> file <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>./resty.so<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> file <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>/usr/local/lib/lua/5.1/resty.so<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span><span class="z-source z-shell z-bash">	<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">no</span></span><span class="z-meta z-function-call z-arguments z-shell"> file <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>/usr/local/lib/lua/5.1/loadall.so<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span><span class="z-meta z-function-call z-shell"></span>) <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">in</span></span><span class="z-meta z-function-call z-arguments z-shell"> /usr/local/nginx/conf/nginx.conf:117</span>
</span></code></pre>
<p>原因似乎是缺少lua-resty-core模块，这里手动编译安装一下
项目地址： https://github.com/openresty/lua-resty-core</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[root@work</span></span><span class="z-meta z-function-call z-arguments z-shell"> nginx]# tar xvf v0.1.28.tar.gz </span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tar</span></span><span class="z-meta z-function-call z-arguments z-shell"> xvf</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">make</span></span><span class="z-meta z-function-call z-arguments z-shell"> install</span>
</span></code></pre>
<h2 id="an-zhuang-fang-shi-2">安装方式2</h2>
<h3 id="gai-shu-1">概述</h3>
<p>直接使用OpenRestry，它是由淘宝工程师开发的，它是基于Nginx与Lua的高性能Web平台，其内部集成了大量精良的Lua库，第三方模块以及大多数的依赖项，用于方便搭建能够处理高并发、扩展性极高的动态Web应用、Web服务和动态网关。所以本身OpenResty内部就已经集成了Nginx和Lua，我们用起来会更加方便</p>
<h3 id="an-zhuang">安装</h3>
<p>参考： https://openresty.org/cn/linux-packages.html
配置：/usr/local/openrestry/nginx/conf</p>
<h2 id="guan-yu-openrestry">关于OpenRestry</h2>
<p>OpenRestry，它是由淘宝工程师开发的，它是基于Nginx与Lua的高性能Web平台，其内部集成了大量精良的Lua库，第三方模块以及大多数的依赖项，用于方便搭建能够处理高并发、扩展性极高的动态Web应用、Web服务和动态网关。所以本身OpenResty内部就已经集成了Nginx和Lua，我们用起来会更加方便。
PS：本文只讲ngx_lua的使用，其他的基本和nginx配置无区别。</p>
<h2 id="ngx-luaxiang-guan-zhi-ling-kuai">ngx_lua相关指令块</h2>
<p>使用Lua编写Nginx脚本的基本构建块是指令。指令用于指定何时运行用户Lua代码以及如何使用结果。下图显示了执行指令的顺序。
<img src="https://image.boychai.xyz/article/nginx_ngx_lua_cycle.png" alt="顺序" /></p>
<p>先来解释一下*的作用</p>
<pre data-lang="lua" class="language-lua z-code"><code class="language-lua" data-lang="lua"><span class="z-source z-lua"><span class="z-keyword z-operator z-arithmetic z-lua">*</span>：无 ， 即 <span class="z-variable z-other z-lua">xxx_by_lua</span> ,指令后面跟的是 <span class="z-variable z-other z-lua">lua</span>指令
</span><span class="z-source z-lua"><span class="z-keyword z-operator z-arithmetic z-lua">*</span><span class="z-punctuation z-accessor z-lua">:</span><span class="z-meta z-property z-lua">_file</span>，即 <span class="z-variable z-other z-lua">xxx_by_lua_file</span> 指令后面跟的是 <span class="z-variable z-other z-lua">lua</span>文件
</span><span class="z-source z-lua"><span class="z-keyword z-operator z-arithmetic z-lua">*</span><span class="z-punctuation z-accessor z-lua">:</span><span class="z-meta z-property z-lua">_block</span>,即 <span class="z-variable z-other z-lua">xxx_by_lua_block</span> 在<span class="z-constant z-numeric z-float z-decimal z-lua">0<span class="z-punctuation z-separator z-decimal z-lua">.</span>9</span><span class="z-punctuation z-accessor z-lua">.</span><span class="z-constant z-numeric z-integer z-decimal z-lua">17</span>版后替换<span class="z-variable z-other z-lua">init_by_lua_file</span>
</span></code></pre>
<h3 id="init-by-lua">init_by_lua*</h3>
<p>该指令在每次Nginx重新加载配置时执行，可以用来完成一些耗时模块的加载，或者初始化一些全局配置。</p>
<h3 id="init-worker-by-lua">init_worker_by_lua*</h3>
<p>该指令用于启动一些定时任务，如心跳检查、定时拉取服务器配置等。</p>
<h3 id="set-by-lua">set_by_lua*</h3>
<p>该指令只要用来做变量赋值，这个指令一次只能返回一个值，并将结果赋值给Nginx中指定的变量。</p>
<h3 id="rewrite-by-lua">rewrite_by_lua*</h3>
<p>该指令用于执行内部URL重写或者外部重定向，典型的如伪静态化URL重写，本阶段在rewrite处理阶段的最后默认执行。</p>
<h3 id="access-by-lua">access_by_lua*</h3>
<p>该指令用于访问控制。例如，如果只允许内网IP访问。</p>
<h3 id="content-by-lua">content_by_lua*</h3>
<p>该指令是应用最多的指令，大部分任务是在这个阶段完成的，其他的过程往往为这个阶段准备数据，正式处理基本都在本阶段。</p>
<h3 id="header-filter-by-lua">header_filter_by_lua*</h3>
<p>该指令用于设置应答消息的头部信息。</p>
<h3 id="body-filter-by-lua">body_filter_by_lua*</h3>
<p>该指令是对响应数据进行过滤，如截断、替换。</p>
<h3 id="log-by-lua">log_by_lua*</h3>
<p>该指令用于在log请求处理阶段，用Lua代码处理日志，但并不替换原有log处理。</p>
<h3 id="balancer-by-lua">balancer_by_lua*</h3>
<p>该指令主要的作用是用来实现上游服务器的负载均衡器算法</p>
<h3 id="ssl-certificate-by">ssl_certificate_by_*</h3>
<p>该指令作用在Nginx和下游服务开始一个SSL握手操作时将允许本配置项的Lua代码。</p>
<h2 id="an-li-1">案例1</h2>
<h3 id="xu-qiu">需求</h3>
<p>输出内容</p>
<h3 id="pei-zhi">配置</h3>
<pre data-lang="nginx" class="language-nginx z-code"><code class="language-nginx" data-lang="nginx"><span class="z-text z-plain">  location /lua {
</span><span class="z-text z-plain">            default_type &#39;text/html&#39;;
</span><span class="z-text z-plain">            content_by_lua &#39;ngx.say(&quot;&lt;h1&gt;HELLO,OpenResty&lt;/h1&gt;&quot;)&#39;;
</span><span class="z-text z-plain">        }
</span></code></pre>
<h2 id="an-li-2">案例2</h2>
<h3 id="xu-qiu-1">需求</h3>
<pre data-lang="text" class="language-text z-code"><code class="language-text" data-lang="text"><span class="z-text z-plain">http://xxx/?name=张三&amp;gender=1
</span><span class="z-text z-plain">Nginx接收到请求后根据gender传入的值，如果是gender传入的是1，则展示张三先生，如果是0则展示张三女士，如果都不是则展示张三。
</span></code></pre>
<h3 id="pei-zhi-1">配置</h3>
<pre data-lang="nginx" class="language-nginx z-code"><code class="language-nginx" data-lang="nginx"><span class="z-text z-plain">  location /getByGender {
</span><span class="z-text z-plain">                default_type &#39;text/html&#39;;
</span><span class="z-text z-plain">                set_by_lua $param &quot;
</span><span class="z-text z-plain">                        -- 获取请求URL上的参数对应的值
</span><span class="z-text z-plain">                        local uri_args = ngx.req.get_uri_args()
</span><span class="z-text z-plain">                        local name = uri_args[&#39;name&#39;]
</span><span class="z-text z-plain">                        local gender = uri_args[&#39;gender&#39;]
</span><span class="z-text z-plain">                        -- 条件判断 if gender 1 先生 0 女士
</span><span class="z-text z-plain">                        if gender == &#39;1&#39; then
</span><span class="z-text z-plain">                                return name..&#39;先生&#39;
</span><span class="z-text z-plain">                        elseif gender == &#39;0&#39; then
</span><span class="z-text z-plain">                                return name..&#39;女士&#39;
</span><span class="z-text z-plain">                        else
</span><span class="z-text z-plain">                                return name
</span><span class="z-text z-plain">                        end
</span><span class="z-text z-plain">                &quot;;
</span><span class="z-text z-plain">                # 解决中文乱码
</span><span class="z-text z-plain">                charset utf-8;
</span><span class="z-text z-plain">                # 返回数据
</span><span class="z-text z-plain">                return 200 $param;
</span><span class="z-text z-plain">        }
</span></code></pre>
<p>ngx.req.get_uri_args()返回的是一个table类型</p>
<h2 id="an-li-3">案例3</h2>
<h3 id="xu-qiu-2">需求</h3>
<pre data-lang="text" class="language-text z-code"><code class="language-text" data-lang="text"><span class="z-text z-plain">动态获取docker容器ip，做代理
</span></code></pre>
<h3 id="pei-zhi-2">配置</h3>
<pre data-lang="nginx" class="language-nginx z-code"><code class="language-nginx" data-lang="nginx"><span class="z-text z-plain">server{
</span><span class="z-text z-plain">         listen       80;
</span><span class="z-text z-plain">         server_name  code.boychai.xyz;
</span><span class="z-text z-plain">         client_max_body_size 4096M;
</span><span class="z-text z-plain">	 set_by_lua $param &#39;
</span><span class="z-text z-plain">         	local name = &quot;gitea&quot;
</span><span class="z-text z-plain">                local port = &quot;3000&quot;
</span><span class="z-text z-plain">                local command = string.format(&quot;echo -n `docker inspect --format=\&#39;{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}\&#39; %s`&quot;, name)
</span><span class="z-text z-plain">                local handle = io.popen(command)
</span><span class="z-text z-plain">                local result = handle:read(&quot;*a&quot;)
</span><span class="z-text z-plain">                handle:close()
</span><span class="z-text z-plain">                return &quot;http://&quot;..result..&quot;:&quot;..port
</span><span class="z-text z-plain">	 &#39;;
</span><span class="z-text z-plain">         location / {
</span><span class="z-text z-plain">                if ( $param = &#39;http://:3000&#39; ) {
</span><span class="z-text z-plain">                        return 500 &quot;Error in obtaining site IP&quot;;
</span><span class="z-text z-plain">                }
</span><span class="z-text z-plain">	        proxy_pass 	$param;
</span><span class="z-text z-plain">		        proxy_set_header 	Host $proxy_host;
</span><span class="z-text z-plain">                proxy_set_header        X-Real-IP $remote_addr;
</span><span class="z-text z-plain">                proxy_set_header 	X-Forwarded-For $proxy_add_x_forwarded_for;
</span><span class="z-text z-plain">         }
</span><span class="z-text z-plain">}
</span></code></pre>

        </section>
        
        

        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
        </article>
</main>


<span id="copy-success" class="hidden">
        Copied!
    </span>
    <span id="copy-init" class="hidden">
        Copy code to clipboard
    </span>
    <script defer src="https://synex.space/js/copyCodeToClipboard.min.js"></script>


    </div>
    <footer>
    <section>
        <nav class="socials nav-navs">
        </nav>

        
        <nav class="nav-navs">
        </nav>

        <div class="credits">
            <small>
                

                
                Powered by
                <a rel="" 

 href="https://www.getzola.org">Zola</a>
                &amp;
                <a rel="" 

 href="https://github.com/welpo/tabi">tabi</a>

                </small>
        </div>
    </section>

    <div id="searchModal" class="search-modal js" role="dialog" aria-labelledby="modalTitle">
    <h1 id="modalTitle" class="visually-hidden">Search</h1>
    <div id="modal-content">
        <div id="searchBar">
            <div class="search-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                    <path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
                </svg>
            </div>
            <input id="searchInput" role="combobox" autocomplete="off" spellcheck="false" aria-expanded="false" aria-controls="results-container" placeholder="Search…"/>
            <div id="clear-search" class="close-icon interactive-icon" tabindex="0" role="button" title="Clear search">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                </svg>
            </div>
        </div>
        <div id="results-container">
            <div id="results-info"><span id="zero_results"> No results</span>
                <span id="one_results"> $NUMBER result</span>
                <span id="many_results"> $NUMBER results</span><span id="two_results"> $NUMBER results</span>
                <span id="few_results"> $NUMBER results</span>
            </div>
            <div id="results" role="listbox"></div>
        </div>
    </div>
</div>
</footer>


    
    
</body>

</html>
